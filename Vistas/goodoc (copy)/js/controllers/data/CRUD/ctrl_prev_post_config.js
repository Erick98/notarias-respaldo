function ctrl_prev_post_config($scope,$route,conexion_app,conexion,catalogos){$scope.lista_previos=new Array();$scope.lista_posteriores=new Array();catalogos.get_suboperaciones($scope);catalogos.get_locacion($scope);catalogos.get_previos($scope);catalogos.get_posteriores($scope);$scope.get_documentos=function(){console.info("Localidad::",$scope.sel_locacion)
console.info("SUBOPERACION::",$scope.sel_suboperacion)
if(typeof $scope.sel_locacion!="undefined"&&typeof $scope.sel_suboperacion!="undefined"){conexion.obtener_previos_posteriores_subop({"usuario":$scope.usr_global,"localidad":$scope.sel_locacion,"suboperacion":$scope.sel_suboperacion},function(data){if(data.exito){$scope.lista_previos=data.previosList;$scope.lista_posteriores=data.posterioresList;if($scope.lista_posteriores.length>0||$scope.lista_previos.length>0){$("#btn_guardar_previos").text("Actualizar datos")}else{$("#btn_guardar_previos").text("Guardar");}}
else{ejecutaAlerta(2,"Ocurrió un error: "+data.estatus);}},function(error){alert("Algo malo paso al obtener los documentos previos: "+error.status)});{}}}
$scope.add_documento=function(doc,lista){lista.push(doc);}
$scope.elimina_documento=function(doc,lista){var index=lista.indexOf(doc);if(index>-1){lista.splice(index,1);}}
$scope.guardar_datos=function(){$scope.documentos=$.merge($scope.lista_previos,$scope.lista_posteriores);conexion.guardar_conf_previos_posteriores({"usuario":$scope.usr_global,"localidad":$scope.sel_locacion,"suboperacion":$scope.sel_suboperacion,"documentosList":$scope.documentos},function(data){if(data.exito){ejecutaAlerta(1,"Se guardarón correctamente los datos");$route.reload()}else{ejecutaAlerta(2,"Ocurrió un error: "+data.estatus);}},function(error){alert("Algo malo paso al guardar los documentos previos y posteriores: "+error.status);});}}