<loadscript url=ctrl_usuarios.js></loadscript>
<loadscript url=ctrl_roles.js></loadscript>
<div ng-controller=ctrl_usuarios>
    <form name="myForm" novalidate ng-submit="lanzaForm()"> <div class="contentInputs"> <div class="colum colums4"> <label>Nombre</label> <input type="text" placeholder="Nombre(s)" ng-model="user.dsnombre" name="nombre" required="true"/> <div class="tooltip" ng-show="myForm.submitted && myForm.nombre.$error.required" >Campo requerido</div></div><div class="colum colums4"> <label></label> <input type="text" placeholder="Primer apellido" ng-model="user.dspaterno" name="padre" required/> <div class="tooltip" ng-show="myForm.submitted && myForm.padre.$error.required" >Campo requerido</div></div><div class="colum colums4"> <label></label> <input type="text" placeholder="Segundo apellido" ng-model="user.dsmaterno"/> </div></div><div class="contentInputs"> <div class="colum colums4" ng-controller="ctrl_roles"> <label>Rol:</label> <div class="wrap_select"> <select ng-model="user.rol" ng-options="rol as rol.dsnombre for rol in roles | orderBy:'dsnombre'" name="roles"> <option value="" disabled selected>--Seleccione un Rol--</option> </select> <div class="tooltip" ng-show="myForm.submitted && myForm.roles.$pristine">Selecciona un rol</div></div></div><div class="colum colums2"> <label>Correo electr&oacute;nico</label> <input type="email" name="email" placeholder="correo@mail.com.mx" ng-model="user.dscorreo" required/> <div class="tooltip" ng-show="myForm.submitted && myForm.email.$error.required" >Campo requerido</div><div class="tooltip" ng-show="myForm.submitted && myForm.email.$error.email" >Correo electr&oacute;nico no v&aacute;lido</div></div></div><div class="contentInputs"> <div class="colum colums4"> <label>Iniciales del usuario</label> <input type="text" placeholder="Iniciales del usuario" ng-model="user.dsiniciales" name="dsiniciales" maxlength="5" required/> <div class="tooltip" ng-show="myForm.submitted && myForm.dsiniciales.$error.required" >Campo requerido</div></div><div class="colum colums2"> <label>Referencia</label> <input type="text" placeholder="Referencia del usuario" ng-model="user.dsreferencia" name="dsreferencia"/> </div></div><div class="contentInputs"> <div class="colum colums4"> <label>Usuario</label> <input type="text" placeholder="Nombre del usuario" ng-model="user.cdusuario" name="cdusuario" required/> <div class="tooltip" ng-show="myForm.submitted && myForm.cdusuario.$error.required" >Campo requerido</div></div><div class="colum colums4"> <label>Contrase&ntilde;a</label> <input type="password" id="pw1" name="pw1" ng-model="user.dsvalenc" required placeholder="Contrase&ntilde;a"/> <div class="tooltip" ng-show="myForm.submitted && myForm.pw1.$error.required" >Campo requerido</div></div><div class="colum colums4"> <label>Repetir</label> <input type="password" id="pw2" name="pw2" ng-model="pw2" ng-required="" pw-check="pw1" placeholder="Confirmar contrase&ntilde;a"/> <div class="tooltip" ng-show="myForm.pw2.$error.pwmatch" >El password es distinto</div></div></div><div class="contentInputs"> <div class="colum colums4"> <label>Vigencia del acceso</label> <input type="text" placeholder="Inicio de acceso" class="datepicker" id="fchinicio"/> </div><div class="colum colums4"> <label></label> <input type="text" placeholder="Fin de acceso" class="datepicker" id="fchfin"/>{{user.fchfin}}</div><div class="colum colums4"> <label>El usuario debe cambiar contrase&ntilde;a</label> <div class="wrap_boolean_radio"> <input name="pass_usuario" value="true" type="radio" ng-model="user.isactualizapwd" checked/> <label class="labelcheck">S&iacute;</label> <input name="pass_usuario" value="false" type="radio" ng-model="user.isactualizapwd"/> <label class="labelcheck">No</label> </div></div></div><div class="contentInputs"> <div class="colum colums2" > <p>&nbsp;</p></div><div class="colum colums4"> <button type="submit" class="btn-blue">Agregar usuarios</button> </div></div><div class="contentInputs"> <label >Listado de usuarios</label> <table class="tableForm"> <tr> <th width="15%">Usuario</th> <th width="40%">Persona</th> <th width="20%">Rol</th> <th width="5%"> </th> <th width="5%"> </th> <th width="5%"> </th> </tr><tr ng-repeat="user in user_lista| orderBy:['rol.dsnombre', 'cdusuario', 'inestatus']" ng-class="{desactive_tab:!user.inestatus}"> <td>{{user.cdusuario}}</td><td>{{user.dsnombre + " " + user.dspaterno + " " + user.dsmaterno}}</td><td>{{user.rol.dsnombre}}</td><td ng-click="suspenderUsuario(user, user.inestatus)" title="Activa/Desactiva temporalmente al usuario"><span class="tbl_icon ico_suspender"></span></td><td ng-click="eliminarUsuario(user)" title="Eliminar usuario"> <span class="tbl_icon ico_delete"></span></td><td class="show" ng-click="lanzaModal(user)"> <span class="tbl_icon ico_pass" title="Cambiar contrase&ntilde;a" ></span> </td></tr></table> </div></form><form name="checkPass" novalidate ng-submit="cambiarPass()"><div id="changeKey" class="avgrund-popup avgrund-popup-animate"> <div class="modal_header">Cambiar contrase&ntilde;a</div><div class="modal_body"> <div class="contentInputs"> <div class="colum "> <label>Nueva contrase&ntilde;a</label> <input type="password" required name="changePassUser" ng-model="changePassUser" placeholder="Nueva contrease&ntilde;a" id="changePassUser"> <div class="tooltip" ng-show="checkPass.submitted && checkPass.changePassUser.$error.required" >Campo requerido</div></div></div><div class="contentInputs"> <div class="colum "> <label>Repetir contrase&ntilde;a</label> <input type="password" name="changePassUserConfirm" ng-model="changePassUserConfirm" pw-check="changePassUser" placeholder="Confirmar la contrase&ntilde;a" id="changePassUserConfirm"> <div class="tooltip" ng-show="checkPass.changePassUserConfirm.$error.pwmatch" >El password es distinto</div></div></div><div class="contentInputs"> <div class="colum" style="width:40%"> <div class="btn-rounded cerrarModal"><p>Cancelar</p></div></div><div class="colum" style="width:40%"> <button class="btn-blue" type="submit">Aceptar</button> </div></div></div></div></form>
</div>
<script>
$('.datepicker').datepicker({dateFormat:"dd-mm-yy"});$(".cerrarModal").click(function(){Avgrund.hide();});
</script>

