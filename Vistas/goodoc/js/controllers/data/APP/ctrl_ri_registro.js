function ctrl_ri_registro($scope,$rootScope,$timeout,conexion_app,conexion,catalogos){$scope.compareciente={};$scope.compareciente.registroRi={};$scope.compareciente.registroRi.isvalidadonotario=false;catalogos.get_instituciones_gob($scope);catalogos.get_documentos_oficiales($scope);catalogos.get_expediente_x_tramite($scope,function(){$timeout(function(){$("#regRi").attr("action","http://"+contexto+"/notaria/registrori/guardar");$("#idsesionactualRi").val($scope.usr_global.idsesionactual);$("#idusuarioRi").val($scope.usr_global.idusuario);$("#idcompareciente").val($scope.compareciente.idcompareciente);$("#idexpediente").val($scope.expediente.idexpediente);$("#dsnombre").val($scope.compareciente.persona.dsnombrecompleto);$("#idtramiteRi").val($rootScope.idtramite);var url=null;if($scope.compareciente.registroRi&&$scope.compareciente.registroRi.dsruta){url=$scope.compareciente.registroRi.dsruta}
if(url&&typeof url!="undefined"&&url!=""){var urlArmado=url.split("/");var url=urlArmado[(urlArmado.length-2)]+"/"+urlArmado[(urlArmado.length-1)];console.info("COMPIYA",$scope.compareciente);var urlParams="idusuario="+$scope.usr_global.idusuario+"&";urlParams+="idsesionactual="+$scope.usr_global.idsesionactual+"&";urlParams+="tipo=ri&";urlParams+="id="+$scope.compareciente.registroRi.idregri+"&";var urlData="http://"+contexto+"/notaria/gestionDocumentos/mostrarDocumento"+"?"+urlParams;console.info("***URL***",urlData);$("#vistaPreviaIframe").attr("src",urlData);}else{return"http://directaerojobs.com/web/uploads/photoIndisponiblePuzzle.jpg";}},500)});$scope.setClave=function(){$("#numeroclave").val($scope.compareciente.registroRi.numclave);}
$scope.setExpedido=function(){$("#idexpedidopor").val($scope.compareciente.registroRi.expedidopor.idelemento);}
$scope.setDocumento=function(){$("#idtipodocumento").val($scope.compareciente.registroRi.tipo.idelemento);}
$scope.setValidaNot=function(){console.info("VALOR NOT::",$scope.compareciente.registroRi.isvalidadonotario);$("#isvalidadonotario").val($scope.compareciente.registroRi.isvalidadonotario);$(".vnot").slideToggle("slow");}
$scope.actualiza_data_ri=function(){if($scope.compareciente.registroRi&&$scope.compareciente.registroRi.expedidopor!=null){for(var i=0;i<$scope.instituciones_gobierno.length;i++){if($scope.compareciente.registroRi.expedidopor.idelemento==$scope.instituciones_gobierno[i].idelemento){$scope.compareciente.registroRi.expedidopor=$scope.instituciones_gobierno[i];$("#idexpedidopor").val($scope.compareciente.registroRi.expedidopor.idelemento);break;}}}
if($scope.compareciente.registroRi&&$scope.compareciente.registroRi.tipo!=null){for(var i=0;i<$scope.documentos_oficiales.length;i++){if($scope.compareciente.registroRi.tipo.idelemento==$scope.documentos_oficiales[i].idelemento){$scope.compareciente.registroRi.tipo=$scope.documentos_oficiales[i];$("#idtipodocumento").val($scope.compareciente.registroRi.tipo.idelemento);break;}}}}
if(!$rootScope.tmp_comp){$scope.goTo('/comparecientes');}else{$scope.compareciente=$rootScope.tmp_comp.compareciente;console.info("ROOTSCOPE",$rootScope.tmp_comp);$timeout(function(){if($scope.compareciente.registroRi&&$scope.compareciente.registroRi.isvalidadonotario){$scope.compareciente.registroRi.isvalidadonotario=true;$scope.setValidaNot();}else{$("#isvalidadonotario").val(false);}
$scope.actualiza_data_ri();},1000);delete $rootScope.tmp_comp;}}