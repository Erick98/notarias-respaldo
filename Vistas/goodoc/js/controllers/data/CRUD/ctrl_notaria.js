function ctrl_notaria($scope,$rootScope,conexion,$timeout,catalogos){$scope.notaria={};$scope.notaria.usuario={};function refreshListNotarias(){$scope.user_lista=conexion.listar_notarias({"usuario":$scope.usr_global,},function(data){$scope.notaria_lista=data.notariaList;},function(error){console.log("Algo malo ocurrió :: Error "+error.status);});}
$scope.edit_not=function(notaria){$rootScope.notaria_edit=notaria;$scope.goTo("/datos_cliente");}
if($rootScope.notaria_edit){$scope.notaria=$rootScope.notaria_edit;$scope.actualiza_not=true;$timeout(function(){$("#estado_value").val($scope.notaria.domicilio.dsestado);$("#municipio_value").val($scope.notaria.domicilio.dsmunicipio);$("#localidad_value").val($scope.notaria.domicilio.dslocalidad);},500);delete $rootScope.notaria_edit;}
$scope.guarda_notaria=function(){var rol={idrol:"c4ca4238a0b923820dcc509a6f75849b",'dsprefijo':'not'}
$scope.notaria.usuario.rol=rol;$scope.notaria.domicilio.dsestado=$("#estado_value").val();$scope.notaria.domicilio.dsmunicipio=$("#municipio_value").val();$scope.notaria.domicilio.dslocalidad=$("#localidad_value").val();if($scope.myForm.$valid){if(!$scope.actualiza_not){conexion.notaria_add({"usuario":$scope.usr_global,"notaria":$scope.notaria},function(data){if(data.exito){ejecutaAlerta(1,'La notaria se guardó correctamente');$timeout(function(){force_redirect("index_adm.html#/lista_clientes");},1000);}else{ejecutaAlerta(2,'Ocurrió un error: '+data.estatus);}},function(error){ejecutaAlerta(2,'Ocurrió un error al guardar al usuario: '+error.status);});}else{conexion.notaria_actualizar({"usuario":$scope.usr_global,"notaria":$scope.notaria},function(data){if(data.exito){ejecutaAlerta(1,'La notaria se actualizó correctamente');$timeout(function(){force_redirect("index_adm.html#/lista_clientes");},1000);}else{ejecutaAlerta(2,'Ocurrió un error: '+data.estatus);}},function(error){ejecutaAlerta(2,'Ocurrió un error al actualizar al usuario: '+error.status);});}}else{$scope.myForm.submitted=true;}}
refreshListNotarias();$timeout(function(){catalogos.get_estados($scope);catalogos.get_municipios($scope);catalogos.get_localidades($scope);},1000);}